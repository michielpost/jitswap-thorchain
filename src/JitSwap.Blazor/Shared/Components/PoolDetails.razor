@using CommunityToolkit.Mvvm.ComponentModel;
@inherits MvvmComponentBase<MainViewModel>

<MudText Typo="Typo.h5">Pool Details</MudText>
<DataLoaderProgress DataLoader="BindingContext.PoolDetailDataLoader" />
@if (BindingContext.PoolDetailDataLoader.LoadingState != LoadingState.Finished) return;

<MudText>Asset: @BindingContext.PoolDetail?.Asset</MudText>
<MudText>Volume24h: @BindingContext.PoolDetail?.Volume24h</MudText>
<MudText>AssetDepth: @BindingContext.PoolDetail?.AssetDepth</MudText>
<MudText>RuneDepth: @BindingContext.PoolDetail?.RuneDepth</MudText>
<MudText>AssetPrice: @BindingContext.PoolDetail?.AssetPrice</MudText>
<MudText>AssetPriceUSD: @BindingContext.PoolDetail?.AssetPriceUSD</MudText>
<MudText>AnnualPercentageRate: @BindingContext.PoolDetail?.AnnualPercentageRate</MudText>
<MudText>PoolAPY: @BindingContext.PoolDetail?.PoolAPY</MudText>
<MudText>Status: @BindingContext.PoolDetail?.Status</MudText>
<MudText>LiquidityUnits: @BindingContext.PoolDetail?.LiquidityUnits</MudText>
<MudText>SynthUnits: @BindingContext.PoolDetail?.SynthUnits</MudText>
<MudText>SynthSupply: @BindingContext.PoolDetail?.SynthSupply</MudText>
<MudText>Units: @BindingContext.PoolDetail?.Units</MudText>
<MudText>NativeDecimal: @BindingContext.PoolDetail?.NativeDecimal</MudText>
<MudText>SaversUnits: @BindingContext.PoolDetail?.SaversUnits</MudText>
<MudText>SaversDepth: @BindingContext.PoolDetail?.SaversDepth</MudText>


@code {

    [Parameter]
    public string? Asset { get; set; }

    protected override void OnParametersSet()
    {
        BindingContext.PoolDetailDataLoader.Clear();
        base.OnParametersSet();
    }

    protected override async Task LoadDataAsync()
    {
        if(!string.IsNullOrEmpty(Asset))
            await BindingContext.LoadPoolDetail(Asset, Midgard.Period._30d);
    }

}
