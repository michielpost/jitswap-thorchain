@inherits MvvmComponentBase<MainViewModel>

<MudText Typo="Typo.h5">API Health</MudText>
<DataLoaderProgress DataLoader="BindingContext.Health" />
@if (BindingContext.Health.LoadingState != LoadingState.Finished) return;

<MudText>Database: @BindingContext.Health.Data?.Database</MudText>
<MudText>Scanner height: @BindingContext.Health.Data?.ScannerHeight</MudText>
<MudText>InSync: @BindingContext.Health.Data?.InSync</MudText>

<br />
<MudText>Last Thor Node</MudText>
<MudText>Height: @BindingContext.Health.Data?.LastThorNode.Height</MudText>
<MudText>@DateTimeOffset.FromUnixTimeSeconds(Convert.ToInt64(BindingContext.Health.Data?.LastThorNode.Timestamp))</MudText>

<br />
<MudText>Last Fetched</MudText>
<MudText>Height: @BindingContext.Health.Data?.LastFetched.Height</MudText>
<MudText>@DateTimeOffset.FromUnixTimeSeconds(Convert.ToInt64(BindingContext.Health.Data?.LastFetched.Timestamp))</MudText>

<br />
<MudText>Last Committed</MudText>
<MudText>Height: @BindingContext.Health.Data?.LastCommitted.Height</MudText>
<MudText>@DateTimeOffset.FromUnixTimeSeconds(Convert.ToInt64(BindingContext.Health.Data?.LastCommitted.Timestamp))</MudText>

<br />
<MudText>Last Aggregated</MudText>
<MudText>Height: @BindingContext.Health.Data?.LastAggregated.Height</MudText>
<MudText>@DateTimeOffset.FromUnixTimeSeconds(Convert.ToInt64(BindingContext.Health.Data?.LastAggregated.Timestamp))</MudText>

@code {

    protected override async Task OnInitializedAsync()
    {
        await BindingContext.LoadHealth();
    }

    protected override async Task OnParametersSetAsync()
    {
        await BindingContext.LoadHealth();

    }

}
